# 快速开始指南

## ⚠️ 重要：启动本地服务器

**不能直接双击 HTML 文件！** 需要通过 HTTP 服务器运行以避免 CORS 错误。

### 最简单的启动方法：

**Windows 用户：**
```
双击 "启动服务器.bat" 文件
浏览器会自动打开 http://localhost:8000
```

**Mac/Linux 用户：**
```bash
python3 启动服务器.py
```

**VS Code 用户：**
```
1. 安装 "Live Server" 扩展
2. 右键 index.html → "Open with Live Server"
```

📖 **详细说明请查看：`CORS问题解决方案.md`**

---

## 第一步：打开系统

1. 按照上面的方法启动服务器
2. 在浏览器中访问 `http://localhost:8000`
3. 你会看到配置页面

## 第二步：配置 OpenAI

### 获取 API Key
- 访问 https://platform.openai.com/api-keys
- 登录你的 OpenAI 账号
- 点击 "Create new secret key" 创建新的 API Key
- 复制 API Key（**注意：只会显示一次！**）

### 填写配置
1. 将 API Key 粘贴到"API Key"输入框
2. 选择模型：
   - 推荐新手使用：**GPT-4o-mini**（便宜、快速）
   - 高质量体验：**GPT-4o**（效果最好，稍贵）

### 模块配置（可使用默认）
系统已经为你预填了三个模块的 System Prompt，新手可以直接使用默认配置。

## 第三步：开始你的第一个场景

点击"开始"按钮后，你需要输入场景信息。

### 最简单的测试场景

复制下面的内容，粘贴到对应的输入框：

**故事的总结：**
```
你来到一个小镇的酒馆，这里是冒险者的聚集地。你想找人一起去探险。
```

**NPC 的 List：**
```
老板、战士杰克、法师露娜
```

**这一幕中 NPC 的 Goal：**
```
老板想卖东西给客人，战士杰克想找队友，法师露娜在寻找魔法书
```

然后点击"开始对话"。

## 第四步：进行对话

在对话框中输入你的话，例如：

```
大家好，我是一个新手冒险者，有人愿意和我一起去探险吗？
```

点击"发送"，AI 会控制 NPC 回应你。

## 第五步：结束并生成下一幕

对话几轮后，点击"结束对话"按钮。

系统会：
1. ✅ 自动总结这一幕发生了什么
2. ✅ 生成下一幕的故事
3. ✅ 给出 NPC 的初始对话

查看生成的内容后，点击"下一幕"继续新的场景。

## 常见问题

### ❓ API 调用失败？
- 检查 API Key 是否正确
- 确认账户有余额
- 检查网络连接

### ❓ NPC 回应格式混乱？
- 可以尝试启用"JSON Mode"（在模块配置中勾选）
- 或者在 System Prompt 中更明确地说明格式要求

### ❓ 响应太慢？
- 切换到更快的模型（GPT-4o-mini 或 GPT-3.5 Turbo）
- 简化场景描述

### ❓ 想重新开始？
- 点击页面上的"返回配置"按钮
- 或者直接刷新页面

## 进阶使用

### 智能对话系统 ✨

**🎉 新功能：AI 现在有记忆了！**
- 🧠 NPC 会记住之前的对话内容（最近10轮）
- 💬 可以引用之前说过的话
- 🔗 保持对话的连贯性和一致性

**智能回应：**
- 📌 如果你对特定 NPC 说话，通常只有那个 NPC 回应
- 📌 如果你问群体问题，可能多个 NPC 回应
- 📌 不是所有 NPC 都会每次说话，更符合真实对话

详细说明请查看 **对话记忆功能说明.md** 和 **更新说明.md**

### 自定义 System Prompt

你可以修改三个模块的 System Prompt 来改变 AI 的行为：

**对话模块**：控制 NPC 如何回应玩家
**总结模块**：控制如何总结故事
**故事模块**：控制如何生成新的场景

### 使用 JSON Mode

JSON Mode 可以让 AI 输出更结构化的内容，勾选对应的复选框即可启用。

启用后，AI 会以 JSON 格式返回结果，系统会自动解析并美化显示。

### 尝试不同的场景

查看 `example_scenario.md` 文件，里面有 5 个精心设计的示例场景：
- 🏰 酒馆冒险
- 👑 宫廷阴谋
- 🚀 科幻空间站
- 🔍 侦探推理
- 🎓 魔法学院

## 费用说明

使用 OpenAI API 会产生费用，大概如下（仅供参考）：

- **GPT-4o-mini**：约 $0.15 / 1M tokens（非常便宜）
- **GPT-4o**：约 $2.50 / 1M tokens
- **GPT-3.5 Turbo**：约 $0.50 / 1M tokens

一次完整的对话场景（包括多轮对话、总结、故事生成）大约消耗 2,000-5,000 tokens。

💡 **省钱小贴士**：
- 用 GPT-4o-mini 进行测试
- 保持场景描述简洁
- 避免过长的对话

## 开始冒险吧！

现在你已经了解了所有基础知识，打开 `index.html`，开始你的 AI RPG 之旅！🎮✨

有问题？查看详细的 `README.md` 文档。

