================================================
✉️ 信件生成功能 - 快速开始指南
================================================

🎯 功能：每轮对话后，NPC会给玩家写一封信

================================================
✨ 核心亮点
================================================

1. NPC视角 - 以第一人称描述想法和感受
2. 生动叙事 - 像真实的私人信件
3. 承接剧情 - 描述对话后发生的事
4. 可配置 - 自定义prompt和格式

================================================
🚀 立即使用（3步）
================================================

【步骤1】打开配置页面
  找到 "Module 5: 信件模块 ✉️"

【步骤2】保持默认设置
  ✅ 启用信件生成 （已勾选）
  ✅ 默认Prompt已经很好用了
  ⭕ JSON Mode （推荐勾选）

【步骤3】开始游戏
  正常游玩，在结束对话时会自动生成信件

================================================
📖 查看信件的位置
================================================

游戏流程：
  对话 → 点击"结束对话" → 总结页面

总结页面布局：
  ┌─────────────────────┐
  │ 场景总结            │
  ├─────────────────────┤
  │ NPC来信 ✉️         │ ← 信件在这里！
  ├─────────────────────┤
  │ 下一幕故事          │
  └─────────────────────┘

================================================
💡 信件示例
================================================

【示例1：酒馆老板的信】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✉️ 来自 老板汤姆 的信

亲爱的艾伦，

你离开后，我一直在想你问的那些问题。
森林里的魔物确实不简单，这些天已经有
好几个冒险者出事了。

我知道劝也劝不住你这样的年轻人，但还是
想提醒你：黑暗森林深处有一座废弃的哨塔，
如果遇到危险，可以暂时躲避。

保重，年轻的冒险者。

—— 老板汤姆
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

【示例2：战友的信】
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✉️ 来自 战士杰克 的信

我的朋友，

今天与你并肩作战的经历，让我想起了
多年前在军中的日子。那种默契的配合，
那种背靠背的信任，已经很久没有体验过了。

明天我会去城外的铁匠那里维修装备，
如果你也需要，我们可以一起去。

让我们一起面对未来的挑战！

—— 你的战友，杰克
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

================================================
⚙️ 自定义配置（可选）
================================================

【想要更文艺的信件】
修改 Module 5 的 System Prompt：
"你是一位浪漫的诗人，用诗意的语言写信..."

【想要更实用的信件】
修改 System Prompt：
"你是一位务实的顾问，写作简洁明了..."

【想要特定风格】
修改 System Prompt：
"你是一个中世纪骑士，使用古典语言..."

================================================
🎨 信件的特殊样式
================================================

信件会以特殊的视觉效果呈现：

✉️ 信封图标
📄 淡黄色仿古纸张背景
🎨 金色边框
📝 衬线字体（Georgia）
🖋️ NPC签名

让你感觉真的收到了一封信！

================================================
📊 JSON格式 vs 文本格式
================================================

【JSON格式】（推荐）
✅ 结构化，显示更可靠
✅ 自动识别NPC名字
✅ 格式统一

勾选 "☑ 启用 JSON Mode"

【文本格式】
✅ AI更自由发挥
✅ 可能更有创意
✅ 格式灵活

不勾选 JSON Mode

================================================
💰 成本和性能
================================================

【额外成本】
每次场景结束额外调用1次API
- Token: 约500-800
- 成本: 约$0.0001/次 (GPT-4o-mini)
- 时间: 额外2-5秒

【可以禁用】
如果不需要，取消勾选 "启用信件生成"

================================================
🎯 信件的作用
================================================

1. 【增强沉浸感】
   从NPC视角看故事，了解TA的内心

2. 【推进剧情】
   揭示秘密、提供线索、暗示发展

3. 【角色塑造】
   展现NPC性格，使角色更立体

4. 【玩家指引】
   提供建议、指出选择、给予鼓励

================================================
❓ 常见问题
================================================

Q: 信件是谁写的？
A: AI会自动选择对话中最活跃的NPC

Q: 每次都会生成信件吗？
A: 是的，只要启用了就会生成

Q: 可以保存信件吗？
A: 目前显示在总结页面，可以复制文本保存

Q: 信件会影响游戏进程吗？
A: 不会，信件是额外的叙事内容

Q: 可以禁用吗？
A: 可以，取消勾选 "启用信件生成"

================================================
🔧 故障排查
================================================

【问题1】没有看到信件
检查：
- 是否勾选了 "启用信件生成"
- 查看浏览器控制台是否有错误

【问题2】信件生成失败
原因：
- 网络问题
- API调用失败
- 对话内容太少

解决：
- 刷新重试
- 检查API Key
- 确保有足够的对话内容

【问题3】信件格式混乱
建议：
- 勾选 "启用 JSON Mode"
- 使用默认的 System Prompt
- 检查Prompt是否正确

================================================
🎓 进阶技巧
================================================

【技巧1】针对特定NPC
在 System Prompt 中指定：
"如果对话中有老板，优先选择老板写信..."

【技巧2】控制信件长度
在 Prompt 中修改：
"字数控制在100-200字"（简短）
"字数控制在400-600字"（详细）

【技巧3】添加特殊元素
在 Prompt 中要求：
"信件开头加上日期"
"信件结尾加上附言（P.S.）"
"包含天气描写"

【技巧4】多种风格切换
保存多个 Prompt 版本：
- 正式版：严肃、庄重
- 轻松版：幽默、随意
- 诗意版：文艺、优美

游戏前根据场景选择合适的版本

================================================
📚 详细文档
================================================

想要了解更多？查看：
→ 信件生成功能说明.md

包含：
- 完整的功能介绍
- 技术实现细节
- 更多示例和配置
- 自定义指南

================================================
🎊 开始享受！
================================================

配置完成后：

1. 开始游戏
2. 与NPC对话
3. 结束对话
4. 查看总结页面
5. 阅读NPC的来信 ✉️

体验从NPC视角看故事的全新感受！

祝游戏愉快！🎮✨

================================================

