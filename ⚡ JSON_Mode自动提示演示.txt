================================================
✨ JSON Mode 自动提示功能 - 快速演示
================================================

🎯 功能：勾选JSON Mode时自动添加提示，取消时自动删除

================================================
📺 演示步骤
================================================

【步骤1】打开配置页面
  找到任一模块（例如 Module 1: 对话模块）

【步骤2】查看原始Prompt
  假设你的Prompt是：
  ┌─────────────────────────────────┐
  │ 你是一个游戏DM，负责控制NPC。   │
  │ 根据故事背景指挥NPC进行对话。   │
  └─────────────────────────────────┘

【步骤3】勾选 JSON Mode
  点击 ☐ → ☑ 启用 JSON Mode

  ✨ 魔法发生了！Prompt自动变为：
  ┌─────────────────────────────────┐
  │ 你是一个游戏DM，负责控制NPC。   │
  │ 根据故事背景指挥NPC进行对话。   │
  │                                 │
  │ 重要：请使用JSON格式返回结果。  │ ← 自动添加
  └─────────────────────────────────┘

【步骤4】查看控制台（可选）
  按 F12 打开控制台，你会看到：
  ✅ 已添加 JSON Mode 提示到 module1-prompt

【步骤5】取消勾选
  点击 ☑ → ☐ 启用 JSON Mode

  ✨ Prompt自动恢复：
  ┌─────────────────────────────────┐
  │ 你是一个游戏DM，负责控制NPC。   │
  │ 根据故事背景指挥NPC进行对话。   │
  └─────────────────────────────────┘
  
  JSON提示已被删除！

  控制台显示：
  ❌ 已删除 JSON Mode 提示从 module1-prompt

================================================
🎬 实际使用场景
================================================

【场景1】启用JSON格式
┌────────────────────────────────────────────┐
│ 1. 编写Prompt（不写JSON说明）               │
│ 2. ☑ 勾选 JSON Mode                        │
│ 3. 系统自动添加提示 ✅                      │
│ 4. 点击"开始"                              │
│ 5. AI返回JSON格式结果                       │
└────────────────────────────────────────────┘

【场景2】测试不同格式
┌────────────────────────────────────────────┐
│ 测试JSON格式：                              │
│   ☑ 勾选 JSON Mode → 开始游戏              │
│                                             │
│ 测试文本格式：                              │
│   返回配置 → ☐ 取消勾选 → 再次开始         │
│                                             │
│ 无需手动修改Prompt！                        │
└────────────────────────────────────────────┘

【场景3】专注于内容
┌────────────────────────────────────────────┐
│ Before (之前):                              │
│ ❌ 要记得写"请返回JSON格式"                 │
│ ❌ 切换时要手动删除/添加                    │
│ ❌ 每个模块都要重复写                       │
│                                             │
│ After (现在):                               │
│ ✅ 只专注写AI的角色和任务                   │
│ ✅ 需要JSON时勾选即可                       │
│ ✅ 系统自动处理格式说明                     │
└────────────────────────────────────────────┘

================================================
💡 智能特性
================================================

【特性1】不会重复添加
  如果Prompt中已经有"请使用JSON格式返回"
  → 勾选时不会重复添加 ✅

【特性2】精确删除
  只删除自动添加的提示
  → 你手动写的内容不会被删除 ✅

【特性3】实时可见
  勾选/取消后立即在textarea中看到变化
  → 不用猜测是否生效 ✅

【特性4】三个模块都支持
  Module 1 (对话模块) ✅
  Module 2 (总结模块) ✅
  Module 3 (故事模块) ✅

================================================
🎯 添加的提示内容
================================================

完整的提示文本：

  "\n\n重要：请使用JSON格式返回结果。"

  - 两个换行符（与原内容分隔）
  - 简洁明确的指令
  - 添加到Prompt末尾

================================================
🔧 界面提示
================================================

每个JSON Mode复选框旁边都有提示：

  ☐ 启用 JSON Mode  (勾选后自动添加JSON提示)
                    ↑
                  灰色提示文字

让你知道这个功能的存在！

================================================
📊 对比示例
================================================

【Module 1: 对话模块】

原始Prompt:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
你是一个资深的游戏DM，负责控制NPC。

原则：
- 记住对话历史
- 保持连贯性
- 智能判断谁应该回应
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

勾选 JSON Mode 后:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
你是一个资深的游戏DM，负责控制NPC。

原则：
- 记住对话历史
- 保持连贯性
- 智能判断谁应该回应

重要：请使用JSON格式返回结果。  ← 新增
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

取消勾选后:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
你是一个资深的游戏DM，负责控制NPC。

原则：
- 记住对话历史
- 保持连贯性
- 智能判断谁应该回应
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

完美恢复！

================================================
✅ 使用建议
================================================

【推荐】
✅ 在Prompt中专注写AI的角色、任务、原则
✅ 需要JSON格式时勾选复选框
✅ 让系统自动处理格式说明

【不推荐】
❌ 手动写"请返回JSON"同时勾选复选框
❌ 勾选JSON Mode但在Prompt中说返回文本

================================================
🎉 享受更便捷的配置体验！
================================================

有了这个功能，你可以：
✅ 更快速地配置模块
✅ 轻松切换JSON/文本格式
✅ 专注于核心的Prompt内容
✅ 减少重复劳动

开始使用吧！🚀✨

================================================

