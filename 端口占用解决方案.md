# 端口占用问题解决方案

## 🔴 问题现象

浏览器访问 `http://localhost:8000` 时显示：
```
当前无法使用此页面
localhost 未发送任何数据
ERR_EMPTY_RESPONSE
```

## 🔍 原因分析

端口 8000 已被其他程序占用（检测到 Manager.exe 进程），导致 Python 服务器无法启动。

---

## ✅ 解决方案

### 方案 1：使用更新后的启动脚本（⭐ 推荐）

我已经更新了启动脚本，它会**自动查找可用端口**。

**Windows 用户：**
```
1. 关闭当前的命令行窗口（如果有）
2. 双击 "启动服务器.bat"
3. 脚本会自动找到可用端口并启动
```

**所有用户：**
```bash
python 启动服务器.py
```

脚本会自动尝试以下端口：
- 8000
- 8080  
- 8888
- 3000
- 5000
- 9000

找到可用端口后会自动启动并打开浏览器。

---

### 方案 2：停止占用端口的程序

**查看是什么程序占用了端口：**
```cmd
netstat -ano | findstr :8000
```

**找到进程 ID 后，查看是什么程序：**
```cmd
tasklist | findstr <进程ID>
```

**如果可以安全关闭，停止该程序后重新启动服务器。**

---

### 方案 3：手动指定其他端口

**使用 Python：**
```bash
# 使用 8080 端口
python -m http.server 8080
```

**使用 Node.js：**
```bash
# 使用 8080 端口
npx http-server -p 8080
```

然后在浏览器访问：`http://localhost:8080`

---

### 方案 4：使用 VS Code Live Server

VS Code 的 Live Server 扩展会自动选择可用端口：

```
1. 用 VS Code 打开项目文件夹
2. 安装 "Live Server" 扩展
3. 右键 index.html
4. 选择 "Open with Live Server"
```

Live Server 通常使用 5500 端口，不会冲突。

---

## 🎯 推荐操作步骤

### 第一步：停止当前的服务器

如果有命令行窗口在运行服务器：
- 按 `Ctrl + C` 停止
- 关闭窗口

### 第二步：使用新的启动脚本

```
双击 "启动服务器.bat"
```

新脚本会：
✅ 自动检测可用端口  
✅ 避免端口冲突  
✅ 自动打开浏览器

### 第三步：确认成功

看到类似这样的输出：
```
==================================================
  AI RPG 测试系统 - 本地服务器
==================================================

✓ 服务器已启动
✓ 使用端口: 8080  ← 注意这里可能不是8000了
✓ 服务器地址: http://localhost:8080

请在浏览器中打开: http://localhost:8080
```

---

## 🔧 快速测试

### 测试端口是否可用

**Windows PowerShell：**
```powershell
Test-NetConnection -ComputerName localhost -Port 8000
```

**命令提示符：**
```cmd
netstat -an | findstr :8000
```

如果看到 "LISTENING"，说明端口被占用。

---

## ❓ 常见问题

### Q: 为什么端口会被占用？

**A:** 常见原因：
- 之前的服务器没有正常关闭
- 其他开发工具在使用该端口
- 系统服务占用了该端口
- 运行了多个相同的启动脚本

### Q: 如何彻底关闭占用端口的程序？

**A:** 如果确定可以安全关闭：
```cmd
# 查看进程ID
netstat -ano | findstr :8000

# 强制结束进程（替换 PID 为实际进程ID）
taskkill /F /PID <进程ID>
```

⚠️ **警告：** 只关闭你确认不需要的程序！

### Q: 能不能设置固定使用某个端口？

**A:** 可以手动指定：
```bash
python -m http.server 8765
```

然后访问 `http://localhost:8765`

### Q: Live Server 在哪个端口？

**A:** Live Server 默认使用 5500 端口，可以在 VS Code 状态栏看到。

---

## 🎉 现在试试

1. **关闭所有打开的命令行窗口**
2. **双击 "启动服务器.bat"**
3. **等待浏览器自动打开**
4. **开始使用！**

如果脚本找到可用端口，就会看到系统界面了！

---

## 📱 端口参考

常用 HTTP 开发端口：
- 3000 - React/Node.js 默认
- 5000 - Flask 默认
- 5500 - VS Code Live Server
- 8000 - Python http.server
- 8080 - Tomcat/其他 Web 服务器
- 8888 - Jupyter Notebook
- 9000 - PHP-FPM

选择一个空闲的即可！

---

**如果还有问题，查看 `故障排除指南.md` 或 `CORS问题解决方案.md`** 📖

