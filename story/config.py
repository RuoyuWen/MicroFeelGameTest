"""
配置文件
"""
import os
from typing import Optional

# API配置
OPENAI_API_KEY: Optional[str] = None
OPENAI_MODEL: str = "gpt-4"  # 使用gpt-4，如果4.1可用则改为gpt-4.1

# 默认Prompt模板
DEFAULT_PROMPTS = {
    "npc_generate_all": """请为一个游戏NPC生成完整信息：
- 姓名：一个符合游戏风格的名称
- 性别：{gender}
- 职业：{profession}
- 背景故事：一段引人入胜的背景故事（200-300字）

请以JSON格式返回，包含name, gender, profession, background字段。""",

    "npc_generate_background": """请为以下NPC生成一段引人入胜的背景故事（200-300字）：
姓名：{name}
性别：{gender}
职业：{profession}

背景故事：""",

    "location_generate": """请为一个游戏地点生成详细描述：
地点名称：{name}
描述：请生成一段生动的描述（150-250字），包括环境、氛围、特色等。""",

    "story_generate": """请根据以下信息生成一个完整的故事：

【参与的NPC角色】（这些NPC将作为故事中的主要或次要角色出现）：
{npcs}

【故事发生的地点】（故事的主要场景和背景环境）：
{locations}

故事风格：{style}

故事要求：
- 故事要有开头、发展和结局
- 符合指定的故事风格
- 故事必须发生在提供的地点中，充分利用地点的特色和环境描述
- 故事中必须包含提供的NPC角色，合理运用他们的背景故事、性格和职业特点
- 让NPC角色与地点环境产生互动，展现地点的氛围和NPC的性格
- 故事长度约800-1200字

请生成故事：""",

    "chapters_generate": """请将以下故事分成三个章节，每章都要有清晰的开头、发展和结尾。

【故事内容】：
{story}

【故事中出现的NPC角色】（这些角色必须在章节中出现）：
{npcs}

【故事发生的地点】（故事必须发生在这些地点中）：
{locations}

要求：
- 第一章：故事的开端，介绍主要角色和背景，必须发生在指定的地点中，包含指定的NPC角色
- 第二章：故事的发展，冲突和转折，继续使用指定的地点和NPC角色
- 第三章：故事的高潮和结局，确保所有指定的NPC角色都有合理的结局，地点环境得到充分利用

重要提示：
- 每个章节都必须包含指定的NPC角色，合理运用他们的背景故事、性格和职业特点
- 每个章节都必须发生在指定的地点中，充分利用地点的特色和环境描述
- 让NPC角色与地点环境产生互动，展现地点的氛围和NPC的性格
- 确保章节之间的连贯性，NPC和地点的使用要前后一致

请以JSON格式返回，格式如下：
{{
  "chapters": [
    {{"title": "第一章标题", "content": "第一章的完整内容（纯文本字符串）"}},
    {{"title": "第二章标题", "content": "第二章的完整内容（纯文本字符串）"}},
    {{"title": "第三章标题", "content": "第三章的完整内容（纯文本字符串）"}}
  ]
}}

注意：content字段必须是纯文本字符串，不要使用嵌套对象或字典。""",

    "chapter_refine": """请优化以下章节内容，使其与前后章节联系更加紧密：

前一章内容：
{previous_chapter}

当前章节：
{current_chapter}

后一章内容：
{next_chapter}

请优化当前章节，使其：
- 与前后章节自然衔接
- 保持故事连贯性
- 增强情节张力

优化后的章节：""",

    "insert_chapter_refine": """请根据以下上下文，完善这个新插入的章节：

前一章：
{previous_chapter}

当前章节（部分内容）：
{current_chapter}

后一章：
{next_chapter}

请完善当前章节的内容，使其：
- 与前后章节自然衔接
- 补充完整的情节
- 保持故事连贯性

完善后的章节："""
}

